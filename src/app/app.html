<div class="container">
  <header class="page-header">
    <div class="header-content">
      <h1 class="page-title">Schedule Report</h1>
      <span class="config-badge">New Configuration</span>
    </div>
  </header>

  <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

  <app-alert 
    *ngIf="errorMessage" 
    [message]="errorMessage" 
    [type]="'error'"
  ></app-alert>

  <form [formGroup]="form" *ngIf="!isLoading" class="form-wrapper">
    <div class="grid-layout">
      <div class="left-column">
        <app-basic-info 
          [form]="form" 
          [reportNames]="reportNames"
          [outputOptions]="outputFormatsList"
        ></app-basic-info>

        <app-report-columns 
          [columnsList]="reportColumnsList"
          [reportColumns]="reportColumns"
          [form]="form"
          (columnToggled)="onColumnToggle($event)"
        ></app-report-columns>

        <app-parameters 
          [parameterFields]="parameterFields"
          [parametersGroup]="parametersGroup"
        ></app-parameters>
      </div>

      <div class="right-column">
        <app-schedule-info 
          [form]="form" 
          [isSubmitting]="isSubmitting"
          (submitted)="onSubmit()"
          (cancelled)="onCancel()"
        ></app-schedule-info>
      </div>
    </div>
  </form>

  <app-json-display 
    *ngIf="sentPayload" 
    [data]="sentPayload" 
    title="Sent JSON Payload:"
    [isSuccess]="true"
  ></app-json-display>

  <app-json-display 
    *ngIf="apiResponse" 
    [data]="apiResponse" 
    title="API Response:"
    [isSuccess]="!apiResponse.error"
  ></app-json-display>
</div>